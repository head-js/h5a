/* h5a-adapter 0.4.0  */
!function(){function t(t){return t?t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):""}function i(t,i){}function n(t,i){this.name=t,this.options=i;var n=["init",i];this.q=[n],this.script=i.script,this.script||(this.script=h+"analytics-integration-"+t.toLocaleLowerCase().replace(/\s/gi,"-")+".js")}function e(){var t=[].slice.call(arguments),e=t[0],r=t.slice(1),s=d.exec(e),a=(s[1]||"",s[2]||"",s[3]);switch(a){case"init":1===r.length?(r=r.shift(),Object.keys(r).map(function(t){var i={};i[t]=r[t];var e=new n(t,i);g.push(e),q.load("script",{script:e.script},function(){e.ready()})}),window.integrations=g):i("invalid init options");break;case"send":g.forEach(function(t){t.send(JSON.parse(JSON.stringify(r)))})}}for(var r=window,s=document,a=r.analytics,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=t(window.H5AnalyticsObject)||"h5a",p=window[o],l=p.l||+new Date,h="/",u=[].slice.call(s.scripts,0),f=/(.+\/)h5a\.js$/,w=0;w<u.length;w+=1){var y=u[w].src.match(f);if(y){h=y[1];break}}a.timing=function(t){return(t||new Date)-l};var d=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,g=[],v=a.createIntegration("utils").tag("script",'<script src="{{ script }}">'),q=new v;n.prototype.enqueue=function(t){this.q.push(t)},n.prototype.send=function(t){if(this._ready){var i=t[0],n=t.slice(1,t.length);"init"===i?a.init(n[0]):"page"===i?a.page.apply(n):"track"===i&&a.track.apply(null,n)}else this.enqueue(t)},n.prototype.ready=function(){if(this._ready=!0,this.q.length>0)for(var t=0;t<this.q.length;t+=1)this.send(this.q[t])};var b=p&&p.q;if(c(b)){for(var j=0;j<b.length;j++)e.apply(e,b[j]);window[o]=e}}(window);