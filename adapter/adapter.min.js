/* h5a-adapter 0.1.0 */
!function(){var i=window,t=document,e=i.analytics;var n=Array.isArray||function(i){return"[object Array]"===Object.prototype.toString.call(i)};for(var a,s=((a=window.H5AnalyticsObject)?a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):"")||"h5a",r=window[s],c=r.l||+new Date,l="/",o=[].slice.call(t.scripts,0),p=/(.+\/)analytics\.js$/,h=0;h<o.length;h+=1){var d=o[h].src.match(p);if(d){l=d[1];break}}function f(i,t){console.log(i,t)}e.timing=function(i){return(i||new Date)-c};var u=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,g=[],w=new(e.createIntegration("utils").tag("script",'<script src="{{ script }}">')),y=/[A-Z]/g;function v(i,t){this.name=i,this.alias=i.match(y).join(""),this.REG_NAME=new RegExp("("+this.name+")|("+this.alias+")");var e={};e[i]=t;var n=["init",e];this.q=[n],this.script=t.script,this.script||(this.script=l+"analytics-integration-"+i.toLocaleLowerCase().replace(/\s/gi,"-")+".js")}function m(){var i=[].slice.call(arguments),t=i[0],e=i.slice(1),n=u.exec(t),a=(n[1],n[2],n[3]);switch(console.assert(a,"methodName is required"),a){case"init":if(1===e.length){var s=e[0],r=Object.keys(s)[0];e=[r,s[r]]}if(2===e.length){var c=e[0],l=new v(c,e=e[1]);g.push(l),w.load("script",{script:l.script},(function(){l.ready()}))}else f("invalid init options");break;case"send":g.forEach((function(i){i.send(JSON.parse(JSON.stringify(e)))}));break;default:console.warn("invalid command")}}v.prototype.enqueue=function(i){this.q.push(i)},v.prototype.padding=function(i,t){var e=i.length,n={$$intg:this.name};if(e<t)console.warn("invalid args",i,t);else{if(e===t)return i.concat([{},n]);if(e===t+1)return i.concat([n]);if(e===t+2){var a=i.pop();return this.REG_NAME.test(a.$exclude)||(a.$$intg=n.$$intg),delete a.$exclude,i.concat([a])}console.warn("invalid args",i,t)}},v.prototype.send=function(i){if(this._ready){var t=i[0],n=i.slice(1,i.length);if("init"===t)e.init(n[0]);else if("identify"===t)n=this.padding(n,n.length-1),e.identify.apply(null,n);else if("page"===t)n=this.padding(n,0),e.page.apply(null,n);else if("track"===t)n=this.padding(n,1),e.track.apply(null,n);else{t===this.name&&this.send(n)}}else this.enqueue(i)},v.prototype.ready=function(){if(this._ready=!0,this.q.length>0)for(var i=this.q.shift();i;)this.send([this.name].concat(i)),i=this.q.shift()};var $=r&&r.q;if(n($)){for(var q=0;q<$.length;q++)m.apply(m,$[q]);window[s]=m}else console.warn("invalid lib.q")}(window);