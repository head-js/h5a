/* h5a-adapter 0.4.0  */
!function(){function t(t){return t?t.replace(/^[\s\xa0]+|[\s\xa0]+$/g,""):""}function i(t,i){}function e(t,i){this.name=t,this.alias=t.match(m).join(""),this.REG_NAME=new RegExp("("+this.name+")|("+this.alias+")");var e={};e[t]=i;var n=["init",e];this.q=[n],this.script=i.script,this.script||(this.script=h+"analytics-integration-"+t.toLocaleLowerCase().replace(/\s/gi,"-")+".js")}function n(){var t=[].slice.call(arguments),n=t[0],s=t.slice(1),a=y.exec(n),r=(a[1]||"",a[2]||"",a[3]);switch(r){case"init":if(1===s.length){var c=s[0],o=Object.keys(c)[0];s=[o,c[o]]}if(2===s.length){var l=s[0],s=s[1],p=new e(l,s);w.push(p),$.load("script",{script:p.script},function(){p.ready()})}else i("invalid init options");break;case"send":w.forEach(function(t){t.send(JSON.parse(JSON.stringify(s)))})}}for(var s=window,a=document,r=s.analytics,c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=t(window.H5AnalyticsObject)||"h5a",l=window[o],p=l.l||+new Date,h="/",f=[].slice.call(a.scripts,0),u=/(.+\/)analytics\.js$/,d=0;d<f.length;d+=1){var g=f[d].src.match(u);if(g){h=g[1];break}}r.timing=function(t){return(t||new Date)-p};var y=/^(?:(\w+)\.)?(?:(\w+):)?(\w+)$/,w=[],v=r.createIntegration("utils").tag("script",'<script src="{{ script }}">'),$=new v,m=/[A-Z]/g;e.prototype.enqueue=function(t){this.q.push(t)},e.prototype.padding=function(t,i){var e=t.length,n={},s={$$intg:this.name};if(e<i);else{if(e===i)return t.concat([n,s]);if(e===i+1)return t.concat([s]);if(e===i+2){var a=t.pop();return this.REG_NAME.test(a.$exclude)||(a.$$intg=s.$$intg),delete a.$exclude,t.concat([a])}}},e.prototype.send=function(t){if(this._ready){var i=t[0],e=t.slice(1,t.length);if("init"===i)r.init(e[0]);else if("page"===i)e=this.padding(e,0),r.page.apply(null,e);else if("track"===i)e=this.padding(e,1),r.track.apply(null,e);else if("exception"===i);else{var n=i;n===this.name&&this.send(e)}}else this.enqueue(t)},e.prototype.ready=function(){if(this._ready=!0,this.q.length>0)for(var t=this.q.shift();t;)this.send([this.name].concat(t)),t=this.q.shift()};var q=l&&l.q;if(c(q)){for(var j=0;j<q.length;j++)n.apply(n,q[j]);window[o]=n}}(window);