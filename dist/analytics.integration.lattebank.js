/* analytics.js-integration-lattebank-analytics 0.1.7 */
!function(){"use strict";function t(t,e){return e={exports:{}},t(e,e.exports),e.exports}var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=t(function(t){t.exports={subscribe:function(t){var e=/[\?&]?_k=\w+/;window.h5aRouteAlreadySubscribed||(window.addEventListener("hashchange",function(n){n.oldURL.replace(e,"")!==n.newURL.replace(e,"")&&t()},!1),window.h5aRouteAlreadySubscribed=!0)}}}),r=n&&"object"==typeof n&&"default"in n?n.default:n,o=t(function(t){function e(t,e){n[t]=e()}var n={};t.exports=n,e("network",function(){var t,e=navigator["-webkit-connection"]||navigator.connection,n=navigator.userAgent,r="UNKNOWN";return e&&e.type?r=e.type.toUpperCase():(t=n.match(/MicroMessenger\/6\.\d\.\d NetType\/(\w+\+?)/i))&&t&&(r=t[1].toUpperCase()),r}),e("screen",function(){var t=screen.width,e=window.innerWidth,n=screen.height,r=(window.innerHeight,window.devicePixelRatio||1);return t/e>1&&r>1&&(t/=r,n/=r),t%1&&(t=t.toFixed(2)),n%1&&(n=n.toFixed(2)),t+"x"+n+"@"+r})}),a=o&&"object"==typeof o&&"default"in o?o.default:o,i=t(function(t){function e(t,e,n){for(var r,o=0;o<n.length;o++)r=n[o],t[r]&&(e[r]=t[r])}t.exports={defaults:function(){var t={};return t.timestamp=1*new Date,e(this.options,t,["p_o","p_i","p_u","p_c","r_c","pageId","pageName","previousPageId","viewId","previousViewId","correlationId"]),t},context:function(){var t=this.options,n={};e(t,n,["t_i","t_c","t_pp","t_ab","channel","utm_campaign","utm_source","utm_medium","utm_term","utm_content"]);var r=this.analytics,o=r.user();return n.ajsId=o.id()||o.anonymousId(),n}}}),u=i&&"object"==typeof i&&"default"in i?i.default:i,c=t(function(t,n){!function(e,r){"function"==typeof define&&define.amd?define(r):"object"==typeof n?t.exports=r():e.deepmerge=r()}(e,function(){return function t(e,n){var r=Array.isArray(n),o=r&&[]||{};return r?(e=e||[],o=o.concat(e),n.forEach(function(n,r){"undefined"==typeof o[r]?o[r]=n:"object"==typeof n?o[r]=t(e[r],n):e.indexOf(n)===-1&&o.push(n)})):(e&&"object"==typeof e&&Object.keys(e).forEach(function(t){o[t]=e[t]}),Object.keys(n).forEach(function(r){"object"==typeof n[r]&&n[r]&&e[r]?o[r]=t(e[r],n[r]):o[r]=n[r]})),o}})}),f=c&&"object"==typeof c&&"default"in c?c.default:c,p=t(function(t){function e(){}function n(t){var e=document.createElement("img");return e.width=1,e.height=1,e.src=t,e}function r(t,e,r){var o=n(t+"?"+e);o.onload=o.onerror=function(){o.onload=null,o.onerror=null,r()}}var o=f,a=u;t.exports={send:function(t){var n=o(a.defaults.call(this),this.options.defaults?this.options.defaults():{});t.data=o(a.context.call(this),t.data);var i=o(n,t);i.data=JSON.stringify(i.data);var u=[];for(var c in i)i[c]&&u.push(c+"="+encodeURIComponent(i[c]));u=u.join("&"),r(this.options.gif,u,e)}}}),l=p&&"object"==typeof p&&"default"in p?p.default:p,s=t(function(t){var e=Object.prototype.hasOwnProperty,n=Object.keys||function(t){var n=[];for(var r in t)e.call(t,r)&&n.push(r);return n};t.exports=function(t){return n(t).length}}),d=(s&&"object"==typeof s&&"default"in s?s.default:s,t(function(t){t.exports=function(t){var e=document.querySelector(t);return e}})),h=d&&"object"==typeof d&&"default"in d?d.default:d,v=t(function(t){var e=h;t.exports=function(){var t=e('meta[name="h5a"]'),n={};if(t)for(var r,o,a,i,u=t.getAttribute("content").split(";"),c=0;c<u.length;c++)r=u[c],r&&(o=r.split("="),a=o[0],i=o[1],a&&i&&(n[a]=i));return n}}),g=v&&"object"==typeof v&&"default"in v?v.default:v,y=t(function(t){function e(t){for(var n=e.options,r=n.parser[n.strictMode?"strict":"loose"].exec(t),o={},a=14;a--;)o[n.key[a]]=r[a]||"";return o[n.q.name]={},o[n.key[12]].replace(n.q.parser,function(t,e,r){e&&(o[n.q.name][e]=r)}),o}e.options={strictMode:!1,key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},t.exports=e}),m=y&&"object"==typeof y&&"default"in y?y.default:y,b=t(function(t){function e(t){return t.replace(/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\//g,"").replace(a,"").match(/[a-zA-Z_]\w*/g)||[]}function n(t,e,n){var r=/\.\w+|\w+ *\(|"[^"]*"|'[^']*'|\/([^\/]+)\/|[a-zA-Z_]\w*/g;return t.replace(r,function(t){return"("==t[t.length-1]?n(t):~e.indexOf(t)?n(t):t})}function r(t){for(var e=[],n=0;n<t.length;n++)~e.indexOf(t[n])||e.push(t[n]);return e}function o(t){return function(e){return t+e}}var a=/\b(Array|Date|Object|Math|JSON)\b/g;t.exports=function(t,a){var i=r(e(t));return a&&"string"==typeof a&&(a=o(a)),a?n(t,i,a):i}}),_=b&&"object"==typeof b&&"default"in b?b.default:b,w=t(function(t){function e(t){switch({}.toString.call(t)){case"[object Object]":return a(t);case"[object Function]":return t;case"[object String]":return o(t);case"[object RegExp]":return r(t);default:return n(t)}}function n(t){return function(e){return t===e}}function r(t){return function(e){return t.test(e)}}function o(t){return/^ *\W+/.test(t)?new Function("_","return _ "+t):new Function("_","return "+i(t))}function a(t){var r={};for(var o in t)r[o]="string"==typeof t[o]?n(t[o]):e(t[o]);return function(t){if("object"!=typeof t)return!1;for(var e in r){if(!(e in t))return!1;if(!r[e](t[e]))return!1}return!0}}function i(t){var e=c(t);if(!e.length)return"_."+t;var n,r,o;for(r=0;r<e.length;r++)o=e[r],n="_."+o,n="('function' == typeof "+n+" ? "+n+"() : "+n+")",t=u(o,t,n);return t}function u(t,e,n){return e.replace(new RegExp("(\\.)?"+t,"g"),function(t,e){return e?t:n})}var c;try{c=_}catch(t){c=_}t.exports=e}),j=w&&"object"==typeof w&&"default"in w?w.default:w,x=t(function(t){var e=Object.prototype.toString;t.exports=function(t){switch(e.call(t)){case"[object Function]":return"function";case"[object Date]":return"date";case"[object RegExp]":return"regexp";case"[object Arguments]":return"arguments";case"[object Array]":return"array";case"[object String]":return"string"}return null===t?"null":void 0===t?"undefined":t&&1===t.nodeType?"element":t===Object(t)?"object":typeof t}}),I=x&&"object"==typeof x&&"default"in x?x.default:x,O=t(function(t){function e(t,e,n){for(var r=0;r<t.length;++r)e.call(n,t.charAt(r),r)}function n(t,e,n){for(var r in t)i.call(t,r)&&e.call(n,r,t[r])}function r(t,e,n){for(var r=0;r<t.length;++r)e.call(n,t[r],r)}try{var o=I}catch(t){var o=I}var a=j,i=Object.prototype.hasOwnProperty;t.exports=function(t,i,u){switch(i=a(i),u=u||this,o(t)){case"array":return r(t,i,u);case"object":return"number"==typeof t.length?r(t,i,u):n(t,i,u);case"string":return e(t,i,u)}}}),A=(O&&"object"==typeof O&&"default"in O?O.default:O,t(function(t){function e(t){return function(e,n,r,o){function u(){for(c in e){var t=normalize(c);if(0===n.indexOf(t)){var r=n.substr(t.length);if("."===r.charAt(0)||0===r.length){n=r.substr(1);var o=e[c];return null==o?void(f=!0):n.length?void(e=o):void(f=!0)}}}c=void 0,f=!0}normalize=o&&i(o.normalizer)?o.normalizer:a,n=normalize(n);for(var c,f=!1;!f;)u();if(c)return null==e?e:t(e,c,r)}}function n(t,e){if(t.hasOwnProperty(e))return t[e]}function r(t,e){return t.hasOwnProperty(e)&&delete t[e],t}function o(t,e,n){return t.hasOwnProperty(e)&&(t[e]=n),t}function a(t){return t.replace(/[^a-zA-Z0-9\.]+/g,"").toLowerCase()}function i(t){return"function"==typeof t}t.exports=e(n),t.exports.find=t.exports,t.exports.replace=function(t,n,r,a){return e(o).call(this,t,n,r,a),t},t.exports.del=function(t,n,o){return e(r).call(this,t,n,null,o),t}})),N=(A&&"object"==typeof A&&"default"in A?A.default:A,t(function(t){var e=Math.max,n=function(t){if(null==t||!t.length)return[];for(var n=new Array(e(t.length-2,0)),r=1;r<t.length;r+=1)n[r-1]=t[r];return n};t.exports=n})),k=N&&"object"==typeof N&&"default"in N?N.default:N,P=t(function(t){var e=Math.max,n=function(t,n){var r=n?n.length:0;if(!r)return[];for(var o=e(Number(t)||0,0),a=e(r-o,0),i=new Array(a),u=0;u<a;u+=1)i[u]=n[u+o];return i};t.exports=n}),S=P&&"object"==typeof P&&"default"in P?P.default:P,z=t(function(t){var e=S,n=k,r=Object.prototype.hasOwnProperty,o=Object.prototype.toString,a=function(t){return Boolean(t)&&"object"==typeof t},i=function(t){return Boolean(t)&&"[object Object]"===o.call(t)},u=function(t,e,n,o){return r.call(e,o)&&void 0===t[o]&&(t[o]=n),e},c=function(t,e,n,o){return r.call(e,o)&&(i(t[o])&&i(n)?t[o]=p(t[o],n):void 0===t[o]&&(t[o]=n)),e},f=function(t,n){if(!a(n))return n;t=t||u;for(var r=e(2,arguments),o=0;o<r.length;o+=1)for(var i in r[o])t(n,r[o],r[o][i],i);return n},p=function(t){return f.apply(null,[c,t].concat(n(arguments)))},l=function(t){return f.apply(null,[null,t].concat(n(arguments)))};t.exports=l,t.exports.deep=p}),R=z&&"object"==typeof z&&"default"in z?z.default:z,q=t(function(t){function e(t){t.addIntegration(d)}function n(t,e){if(t){var n=t.path;e.singlePage===!0&&n.indexOf("#")<0&&(n+=location.hash);var r=/;jsessionid=[0-9a-zA-Z]{8,32}$/gi;return n=n.replace(r,""),e.includeSearch&&t.search&&(n+=t.search),n}}var o=window.analytics,i=R,u=m,c=g,f=l,p=a,s=r;e.Integration=d;var d=o.createIntegration("Latte Bank Stats").readyOnLoad().option("domain","auto");d.on("construct",function(t){var e=u(window.location.href).queryKey,n=c(),r=t.options;e.p_o&&(r.p_o=e.p_o),e.p_i&&(r.p_i=e.p_i),e.p_u&&(r.p_u=e.p_u),e.p_c&&(r.p_c=e.p_c),e.r_c&&(r.r_c=e.r_c),e.pageId&&(r.pageId=e.pageId),e.pageName?r.pageName=e.pageName:n["page-name"]&&(r.pageName=n["page-name"]),e.previousPageId&&(r.previousPageId=e.previousPageId),e.viewId&&(r.viewId=e.viewId),e.previousViewId&&(r.previousViewId=e.previousViewId),e.correlationId&&(r.correlationId=e.correlationId),n.i&&(r.t_i=n.i),n.c?(r.channel=n.c,r.t_c=n.c):n.campaign?(r.channel=n.campaign,r.t_c=n.campaign):e.t_c?(r.channel=e.t_c,r.t_c=e.t_c):e.channel&&(r.channel=e.channel,r.t_c=e.channel),e.t_pp&&(r.t_pp=e.t_pp),e.t_ab&&(r.t_ab=e.t_ab),e.utm_campaign&&(r.utm_campaign=e.utm_campaign),e.utm_source&&(r.utm_source=e.utm_source),e.utm_medium&&(r.utm_medium=e.utm_medium),e.utm_term&&(r.utm_term=e.utm_term),e.utm_content&&(r.utm_content=e.utm_content)}),d.prototype.initialize=function(){this.pageCalled=!1;var t=this.options,e=this.analytics;t.p_u&&e.identify(t.p_u),this.ready()},d.prototype.loaded=function(){return!0},d.prototype.page=function t(e){var r=e.properties(),o=e.fullName(),a=this.options,i=this.analytics;a.singlePage===!0&&s.subscribe(function(){t.call(this,e)}.bind(this));var u=n(r,a),c=/[!@#\$%\^\&\*\)\(\+\=\.]/gi,l={eventId:e.obj.eventId,event:"pageview",data:{pagename:a.pageName,title:o||r.title.replace(c,"â˜’"),page:u,t_p:u,timing:i.timing(),network:p.network,screen:p.screen}};f.send.call(this,l);var d={eventId:e.obj.eventId,event:"$web_page_load",data:{title:a.pageName,title_:l.data.title}};f.send.call(this,d),this.pageCalled=!0},d.prototype.identify=function(t){},d.prototype.track=function(t,e){var r=i({},t.obj.properties),o=n({path:t.proxy("context.page.path")},this.options),a={eventId:t.obj.eventId,event:r.event||this.options.pageName,data:{action:t.event(),t_p:o}};delete r.event,i(a.data,r),f.send.call(this,a)},e(o)}),E=q&&"object"==typeof q&&"default"in q?q.default:q;return E}();